@{
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
    ViewBag.Title = "Quản lí bài đăng";
}

<fieldset>
    <div id="container-grid">
        @{
            if (ViewBag.Grid != null && ViewBag.Grid.TotalRowCount > 0)
            {
                var grid = (WebGrid)ViewBag.Grid;
                @grid.GetHtml(tableStyle: "", mode: WebGridPagerModes.All,
                                headerStyle: "header",
                                alternatingRowStyle: "alt",
                                htmlAttributes: new { id = "grid" },
                                columns: grid.Columns(
                                        grid.Column(header: "STT", format: item => item.WebGrid.Rows.IndexOf(item) + 1 + ViewBag.Index),
                                        grid.Column("Code", "Mã bài"),
                                        grid.Column(header: "Tiêu đề", columnName: "Title", format: @<text>
                                        <a href="@Url.Action("Details", "Post",
                                        new { id = @item.ID })">@item.Title</a></text>),
                                        grid.Column("PostStatus", "Trạng thái"),
                                        grid.Column("CreatedDate", "Ngày tạo",
                                            format: (item) => string.Format("{0:yyyy-MM-dd HH:mm:ss}", item.CreatedDate)),
                                        grid.Column("EditedDate", "Lần sửa cuối",
                                        format: (item) => item.EditedDate==null? "" :string.Format("{0:yyyy-MM-dd HH:mm:ss}", item.EditedDate)),
                                        grid.Column("RenewDate", "Lần gia hạn cuối",
                                            format: (item) => item.RenewDate == null ? "" : string.Format("{0:yyyy-MM-dd HH:mm:ss}", item.RenewDate)),
                                        grid.Column("ExpiredDate", "Ngày hết hạn",
                                            format: (item) => string.Format("{0:yyyy-MM-dd HH:mm:ss}", item.ExpiredDate)),
                                        grid.Column("CountRenew", "Số lần đã gia hạn")
                                            
                ));
            }
            else
            {
                <div id="message-sv" style="width:967px; margin: 0 auto;">
                    <div class="message-notification message-information">
                        <a class="close" id="btnCloseDiv"></a>
                        <div>
                            Bạn chưa có bài đăng nào :)
                        </div>
                    </div>
                </div>
            }
    
        }
        <br/>
        <br/>
    </div>
</fieldset>

<script type="text/javascript" >
    $(document).ready(function () {
        $("#options a").removeClass("active");
        $("#btnQuanLy").addClass('active');
        $('a[href="#"]').live('click', function (event) {
        event.preventDefault();
        });
    });
</script>